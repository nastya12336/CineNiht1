// Полная база данных фильмов (110 фильмов)
const moviesDatabase = {
    comedy: [
        {
            id: 1,
            title: "Мальчишник в Вегасе",
            year: 2009,
            rating: 7.7,
            duration: "100 мин",
            director: "Тодд Филлипс",
            description: "Четверо друзей отправляются в Лас-Вегас на мальчишник, который запомнится им навсегда. Смешные ситуации, невероятные приключения и незабываемые моменты ждут их в городе грехов.",
            poster: "img/мальчишник в вегасе.jpg",
            mood: "comedy",
            reviews: [
                { user: "Алексей", rating: 5, comment: "Очень смешно! Пересматривал несколько раз" },
                { user: "Мария", rating: 4, comment: "Хороший вечерний фильм для компании" }
            ]
        },
        {
            id: 2,
            title: "Одноклассники",
            year: 2010,
            rating: 7.8,
            duration: "102 мин",
            director: "Деннис Дуган",
            description: "Смешная история о встрече выпускников спустя 30 лет. Ностальгия, смешные ситуации и неожиданные откровения ждут героев.",
            poster: "img/Однокласники.jpg",
            mood: "comedy",
            reviews: [
                { user: "Сергей", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Ольга", rating: 5, comment: "Много смешных моментов" }
            ]
        },
         {
            id: 2,
            title: "Красотка на всю голову",
            year: 2018,
            rating: 6.87,
            duration: "110 мин",
            director: "Эбби Кон",
            description: "После удара головой обычная девушка Рене начинает видеть себя супермоделью.",
            poster: "img/красотка на всю голову.jpg",
            mood: "comedy",
            reviews: [
                { user: "Сергей", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Антон", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Мачо и ботан",
            year: 2012,
            rating: 6.87,
            duration: "110 мин",
            director: "21 Jump Street",
            description: "Полицейские Шмидт и Дженко внедряются в школу под видом учеников.",
            poster: "img/мачо и ботан.jpg",
            mood: "comedy",
            reviews: [
                { user: "Алина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Матвей", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Третий лишний",
            year: 2012,
            rating: 6.87,
            duration: "110 мин",
            director: "Сет Макфарлейн",
            description: "История о парне, его девушке и говорящем плюшевом медведе.",
            poster: "img/третий лишний.jpeg",
            mood: "comedy",
            reviews: [
                { user: "Алина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Матвей", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Притворись моей женой",
            year: 2011,
            rating: 6.87,
            duration: "110 мин",
            director: "Константин Степиков",
            description: "Адам Сэндлер в роли ловеласа, который притворяется женатым.",
            poster: "img/притворись.jpg",
            mood: "comedy",
            reviews: [
                { user: "Алина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Матвей", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Очень плохая училка",
            year: 2011,
            rating: 6.87,
            duration: "110 мин",
            director: "Джейк Кэздан",
            description: "Камерон Диаз играет школьную учительницу, мечтающую выйти замуж за богатого.",
            poster: "img/училка.jpg",
            mood: "comedy",
            reviews: [
                { user: "Алина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Матвей", rating: 5, comment: "Много смешных моментов" }
            ]
        },
         {
            id: 2,
            title: "Любовь и голуби",
            year: 1984,
            rating: 8.3,
            duration: "107 мин",
            director: "Владимир Меньшов",
            description: "Советская классика с Александром Михайловым и Людмилой Гурченко",
            poster: "img/любовь и голуби.jpg",
            mood: "comedy",
            reviews: [
                { user: "Алина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Матвей", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Иван Васильевич меняет профессию",
            year: 1973,
            rating: 8.8,
            duration: "92 мин",
            director: "Леонид Гайдай",
            description: "Из-за поломки машины времени управдом Бунша и жулик Жорж Милославский оказываются в XVI веке, а Иван Грозный — в советской Москве.",
            poster: "img/Иван Васильевич.jpg",
            mood: "comedy",
            reviews: [
                { user: "Алина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Матвей", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Знакомство с родителями",
            year: 2000,
            rating: 6.9,
            duration: "99 мин",
            director: "Джей Роуч",
            description: "Медбрат Грег Фокер пытается произвести хорошее впечатление на родителей своей девушки, но его визит превращается в череду катастрофически неловких ситуаций из-за подозрительного отца-агента ЦРУ и его странного кота.",
            poster: "img/знакомство с родителями.jpg",
            mood: "comedy",
            reviews: [
                { user: "Алина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Матвей", rating: 5, comment: "Много смешных моментов" }
            ]
        },
         {
            id: 2,
            title: "50 первых поцелуев",
            year: 2004,
            rating: 6.9,
            duration: "100 мин",
            director: " Питер Сигал",
            description: "Адам Сэндлер влюбляется в девушку с потерей памяти. Трогательная история с долей юмора",
            poster: "img/50 поцелуев.jpg",
            mood: "comedy",
            reviews: [
                { user: "Марк", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Ксюша", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Охотники за привидениями",
            year: 2004,
            rating: 7.8,
            duration: "105 мин",
            director: "Айвен Райтман",
            description: "Фантастическая комедия о команде парапсихологов, борющихся с призраками.",
            poster: "img/охотники за привидениями.png",
            mood: "comedy",
            reviews: [
                { user: "Полина", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Лиза", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Эльф",
            year: 2003,
            rating: 6.9,
            duration: "105 мин",
            director: " Джон Фавро",
            description: "Уилл Феррелл в роли человека, воспитанного эльфами. Добрая история с рождественским настроением.",
            poster: "img/эл.jpg",
            mood: "comedy",
            reviews: [
                { user: "Дима", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Кира", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Бестолковые",
            year: 1995,
            rating: 6.7,
            duration: "115 мин",
            director: "Эми Хекерлинг",
            description: "Алисия Сильверстоун в роли популярной школьницы. Ироничная комедия о школьной жизни.",
            poster: "img/бестолковые.jpg",
            mood: "comedy",
            reviews: [
                { user: "Дима", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Кира", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Полицейское с Рублёвки. Новогодний беспредел 2",
            year: 2021,
            rating: 8.4,
            duration: "103 мин",
            director: "Илья Куликов",
            description: "Гриша Измайлов снова в деле! На этот раз ему предстоит спасти праздник и поймать опасного рецидивиста.",
            poster: "img/полиц 2.jpg",
            mood: "comedy",
            reviews: [
                { user: "Дима", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Кира", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Один дома",
            year: 1990,
            rating: 8.5,
            duration: "109 мин",
            director: "Крис Коламбус",
            description: "Мальчик по забывчивости семьи остается один дома на Рождество и защищает дом от грабителей.",
            poster: "img/один дома.png",
            mood: "comedy",
            reviews: [
                { user: "Дима", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Кира", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Убийство в Париже",
            year: 2023,
            rating: 6.6,
            duration: "102 мин",
            director: "Джереми Гэринг",
            description: "Экранизация пьесы. Неудачливый театральный режиссер ставит детективную пьесу с богатой наследницей.",
            poster: "img/париж.webp",
            mood: "comedy",
            reviews: [
                { user: "Дима", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Кира", rating: 5, comment: "Много смешных моментов" }
            ]
        },
        {
            id: 2,
            title: "Барби",
            year: 2023,
            rating: 8.4,
            duration: "114 мин",
            director: "Крис Коламбус",
            description: "Кукла Барби отправляется в реальный мир, чтобы познать себя. Яркий, ироничный и неожиданно глубокий фильм.",
            poster: "img/барби.jpg",
            mood: "comedy",
            reviews: [
                { user: "Дима", rating: 4, comment: "Ностальгическая комедия" },
                { user: "Кира", rating: 5, comment: "Много смешных моментов" }
            ]
        },
           
        // ... остальные 10 комедий
    ],

    drama: [
        {
            id: 11,
            title: "Зеленая миля",
            year: 1999,
            rating: 8.6,
            duration: "189 мин",
            director: "Фрэнк Дарабонт",
            description: "Эмоциональная драма о тюремном надзирателе и необычном заключенном, обладающем сверхъестественными способностями.",
            poster: "img/зеленая миля.jfif",
            mood: "drama",
            reviews: [
                { user: "Сергей", rating: 5, comment: "Шедевр! Плакал в конце" },
                { user: "Ольга", rating: 5, comment: "Невероятно трогательно" }
            ]
        },
        {
            id: 12,
            title: "Побег из Шоушенка",
            year: 1994,
            rating: 9.3,
            duration: "142 мин",
            director: "Фрэнк Дарабонт",
            description: "Бухгалтер Энди Дюфрейн обвинён в убийстве собственной жены и её любовника. В тюрьме он находит неожиданный способ сохранить надежду.",
            poster: "img/побег из шоушенка.jfif",
            mood: "drama",
            reviews: [
                { user: "Александр", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: " Форрест Гамп",
            year: 1994,
            rating: 8.9,
            duration: "142 мин",
            director: "Роберт Земекис",
            description: "Простой человек становится невольным участником ключевых событий в истории Америки.",
            poster: "img/форест гамп.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: "Леон",
            year: 1994,
            rating: 8.7,
            duration: "133 мин",
            director: "Люк Бессон",
            description: "Наёмник берёт под опеку девочку, чью семью убили, и между ними возникает глубокая связь.",
            poster: "img/леон.jpeg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
         {
            id: 12,
            title: "Зеленая книга",
            year: 2018,
            rating: 8.1,
            duration: "130 мин",
            director: "Питер Фаррелли",
            description: "Вышибала и пианист путешествуют по Америке 1960-х, преодолевая расовые предрассудки.",
            poster: "img/зелл.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: "Джокер",
            year: 2019,
            rating: 8.1,
            duration: "122 мин",
            director: "Тодд Филлипс",
            description: "Психически больной комик, доведённый до отчаяния обществом, превращается в главного преступника Готэма.",
            poster: "img/джокер.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
         {
            id: 12,
            title: "Три билборда...",
            year: 2017,
            rating: 8.1,
            duration: "115 мин",
            director: "Мартин Макдона",
            description: "Мать устанавливает провокационные билборды, обвиняя полицию в бездействии в расследовании убийства её дочери.",
            poster: "img/3 билдборда.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: "Аритмия",
            year: 2017,
            rating: 7.6,
            duration: "112 мин",
            director: "Борис Хлебников",
            description: "Врач скорой помощи борется с системой здравоохранения, пытаясь спасти и свой брак.",
            poster: "img/аритмия.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: "Список Шиндлера",
            year: 1993,
            rating: 8.8,
            duration: "195 мин",
            director: "Стивен Спилберг",
            description: "Немецкий промышленник во время Холокоста спасает тысячи евреев, занося их в специальный список.",
            poster: "img/список.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: "Престиж",
            year: 2006,
            rating: 8.6,
            duration: "130 мин",
            director: "Кристофер Ноланг",
            description: "Два иллюзиониста вступают в жестокое соперничество, готовые на всё ради создания идеального фокуса.",
            poster: "img/престиж.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: "Остров проклятых",
            year: 2010,
            rating: 8.5,
            duration: "148 мин",
            director: "Мартин Скорсезе",
            description: "Следователь прибывает в психиатрическую лечебницу на острове, чтобы расследовать исчезновение пациентки.",
            poster: "img/остров проклятых.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
         {
            id: 12,
            title: "Бойцовский клуб",
            year: 1999,
            rating: 8.4,
            duration: "139 мин",
            director: "Дэвид Финчер",
            description: "Страдающий бессонницей офисный работник и загадочный торгаш мылом создают подпольный бойцовский клуб.",
            poster: "img/бойцовский клуб.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        {
            id: 12,
            title: "Достучаться до небес",
            year: 1997,
            rating: 8.5,
            duration: "87 мин",
            director: "	Томас Ян",
            description: "Двое незнакомцев, узнав, что им осталось жить считанные недели, угоняют машину и отправляются в путешествие к морю.",
            poster: "img/достучаться до небес.jpg",
            mood: "drama",
            reviews: [
                { user: "Олег", rating: 5, comment: "Лучший фильм всех времен" },
                { user: "Татьяна", rating: 5, comment: "Вдохновляющая история" }
            ]
        },
        // ... остальные 10 драм
    ],

    thriller: [
        {
            id: 21,
            title: "Исчезнувшая",
            year: 2014,
            rating: 8.1,
            duration: "149 мин",
            director: "Дэвид Финчер",
            description: "Захватывающий триллер о поисках пропавшей жены. Мужчина оказывается в центре расследования, где каждый может быть подозреваемым.",
            poster: "img/исчезнувшая.jpg",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
        {
            id: 21,
            title: "Молчание ягнят",
            year: 1991,
            rating: 8.3,
            duration: "118 мин",
            director: "Джонатан Демми",
            description: "Стажёрка ФБР должна добиться помощи от гениального маньяка-каннибала, чтобы поймать другого серийного убийцу.",
            poster: "img/Молчание ягнят.jpg",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
         {
            id: 21,
            title: "Игра",
            year: 1997,
            rating: 8.3,
            duration: "129 мин",
            director: "Дэвид Финчер",
            description: "Богатый банкир получает в подарок от брата услугу таинственной компании, и его жизнь превращается в кошмар.",
            poster: "img/игра.jpg",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
        {
            id: 21,
            title: "Помни",
            year: 2000,
            rating: 8.2,
            duration: "113 мин",
            director: "Кристофер Нолан",
            description: "Мужчина с амнезией, который полагается на записи и татуировки, пытается найти убийцу своей жены.",
            poster: "img/помни.jpg",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
        {
            id: 21,
            title: "Старикам тут не место",
            year: 2007,
            rating: 8.0,
            duration: "122 мин",
            director: "Братья Коэн",
            description: "Охотник находит груду трупов и чемодан с деньгами, становясь мишенью для хладнокровного наёмника.",
            poster: "img/старикам.jpg",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
         {
            id: 21,
            title: "Девушка с татуировкой дракона",
            year: 2011,
            rating: 7.8,
            duration: "158 мин",
            director: "Дэвид Финчер",
            description: "Журналист и хакерша расследуют старое исчезновение девушки из богатой и могущественной семьи.",
            poster: "img/тату дракон.jpg",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
        {
            id: 21,
            title: "Господин никто",
            year: 2009,
            rating: 7.8,
            duration: "149 мин",
            director: "Жако Ван Дормель",
            description: "В 2092 году 118-летний Немо Никто — последний смертный человек. Прикованный к постели, он вспоминает свои жизни, которые ветвятся на множество параллельных реальностей в зависимости от принятых решений +",
            poster: "img/господин никто.webp",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
        {
            id: 21,
            title: "Звонок",
            year: 2003,
            rating: 7.5,
            duration: "115 мин",
            director: "Гор Вербински",
            description: "Просмотр загадочной видеокассеты грозит смертью ровно через неделю, и журналистка должна раскрыть тайну плёнки.",
            poster: "img/звонок.jpg",
            mood: "thriller",
            reviews: [
                { user: "Дмитрий", rating: 5, comment: "Неожиданная развязка!" },
                { user: "Елена", rating: 4, comment: "Держит в напряжении до конца" }
            ]
        },
        // ... остальные 10 триллеров
    ],

    action: [
        {
            id: 31,
            title: "Безумный Макс: Дорога ярости",
            year: 2015,
            rating: 8.1,
            duration: "120 мин",
            director: "Джордж Миллер",
            description: "Экшен-фантастика в постапокалиптическом мире. Макс присоединяется к группе беглецов, спасающихся от тирана.",
            poster: "img/безумная макс.jfif",
            mood: "action",
            reviews: [
                { user: "Иван", rating: 5, comment: "Визуальный шедевр!" },
                { user: "Мария", rating: 4, comment: "Невероятные трюки" }
            ]
        },
        // ... остальные 10 боевиков
    ],

    fantasy: [
        {
            id: 41,
            title: "Властелин Колец: Братство Кольца",
            year: 2001,
            rating: 8.8,
            duration: "178 мин",
            director: "Питер Джексон",
            description: "Эпическое фэнтези о путешествии хоббита Фродо, который должен уничтожить Кольцо Всевластия в огне Роковой Горы.",
            poster: "img/властелин колец братья кольца.jfif",
            mood: "fantasy",
            reviews: [
                { user: "Михаил", rating: 5, comment: "Лучшее фэнтези всех времен" },
                { user: "Татьяна", rating: 5, comment: "Великолепная экранизация" }
            ]
        },
        // ... остальные 10 фэнтези
    ],

    'sci-fi': [
        {
            id: 51,
            title: "Интерстеллар",
            year: 2014,
            rating: 8.6,
            duration: "169 мин",
            director: "Кристофер Нолан",
            description: "Научно-фантастический эпос о путешествии через червоточину в поисках нового дома для человечества.",
            poster: "img/интерстеллар.jpg",
            mood: "sci-fi",
            reviews: [
                { user: "Андрей", rating: 5, comment: "Умный и красивый фильм" },
                { user: "Светлана", rating: 4, comment: "Сложно, но интересно" }
            ]
        },
        // ... остальные 10 фантастических фильмов
    ],

    romance: [
        {
            id: 61,
            title: "Титаник",
            year: 1997,
            rating: 7.9,
            duration: "195 мин",
            director: "Джеймс Кэмерон",
            description: "Легендарная история любви на фоне крушения лайнера. Роуз и Джек находят друг друга на борту обреченного корабля.",
            poster: "img/титаник.jfif",
            mood: "romance",
            reviews: [
                { user: "Наталья", rating: 5, comment: "Вечная классика" },
                { user: "Виктор", rating: 4, comment: "Трогательная история" }
            ]
        },
        // ... остальные 10 мелодрам
    ],

    horror: [
        {
            id: 71,
            title: "Сияние",
            year: 1980,
            rating: 8.4,
            duration: "146 мин",
            director: "Стэнли Кубрик",
            description: "Классический хоррор о писателе, который с семьей остается на зиму в отеле с привидениями.",
            poster: "img/сияние.jpg",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
        {
            id: 71,
            title: "Чужой",
            year: 1979,
            rating: 8.1,
            duration: "117 мин",
            director: "Ридли Скотт",
            description: "Экипаж космического корабля подвергается нападению совершенного инопланетного организма-убийцы.",
            poster: "img/Чужой.jpg",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
        {
            id: 71,
            title: "Оно",
            year: 2017,
            rating: 8.4,
            duration: "135 мин",
            director: "Андрес Мускетти",
            description: "Компания подростков в городке Дерри сталкивается с древним злом, принимающим облик клоуна Пеннивайза.",
            poster: "img/оно.jpg",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
         {
            id: 71,
            title: "Паразиты",
            year: 2019,
            rating: 8.0,
            duration: "135 мин",
            director: "Пон Чжун Хо",
            description: "Бедная семья хитростью устраивается на работу в дом к богачам, но их тайны оказываются не единственным, что скрывает особняк.",
            poster: "img/паразиты.jpg",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
         {
            id: 71,
            title: "Реинкарнация",
            year: 2004,
            rating: 6.8,
            duration: "92 мин",
            director: "Такаси Симдзу",
            description: "Проклятие, преследующее семью, передаётся через ужасную травму, оставляемую на телах жертв.",
            poster: "img/реинкорнация.jpg",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
        {
            id: 71,
            title: "Хостел",
            year: 2005,
            rating: 6.8,
            duration: "95 мин",
            director: "Элай Рот",
            description: "Трое друзей-туристов попадают в ловушку в словацком хостеле, который оказывается филиалом элитного клуба пыток.",
            poster: "img/хостел.png",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
        {
            id: 71,
            title: "Пила: Игра на выживание",
            year: 2004,
            rating: 7.7,
            duration: "103 мин",
            director: "Джеймс Ван",
            description: "Двое мужчин просыпаются в запертой комнате и понимают, что стали жертвами маньяка, исповедующего своеобразную мораль.",
            poster: "img/пила.jpg",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
        {
            id: 71,
            title: "Бабадук",
            year: 2014,
            rating: 6.8,
            duration: "93 мин",
            director: "Дженнифер Кент",
            description: "Вдовец и его маленький сын обнаруживают, что монстр из детской книги пришёл в их реальный мир.",
            poster: "img/бабадук.jpg",
            reviews: [
                { user: "Артем", rating: 5, comment: "Жутко и атмосферно" },
                { user: "Юлия", rating: 4, comment: "До сих пор страшно" }
            ]
        },
        // ... остальные 10 ужасов
    ],

    adventure: [
        {
            id: 81,
            title: "Индиана Джонс: В поисках утраченного ковчега",
            year: 1981,
            rating: 8.4,
            duration: "115 мин",
            director: "Стивен Спилберг",
            description: "Приключения археолога в поисках библейских реликвий. Индиана Джонс против нацистов в гонке за Ковчегом Завета.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
        {
            id: 81,
            title: "Пираты Карибского моря: Проклятие «Чёрной жемчужины»",
            year: 2003,
            rating: 8.5,
            duration: "143 мин",
            director: "Гор Вербински",
            description: "Экцентричный капитан Джек Воробей и кузнец Уилл Тёрнер объединяются, чтобы спасти девушку и снять проклятие с пиратов-скелетов.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
        {
            id: 81,
            title: "Джуманджи: Зов джунглей",
            year: 2017,
            rating: 6.9,
            duration: "119 мин",
            director: "Джейк Кэздан",
            description: "Четверо подростков оказываются внутри опасной видеоигры, где им предстоит отыграть партию и выжить среди диких животных и ловушек.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Сериал: Очень странные дела",
            year:  2016_2025,
            rating: 8.7,
            duration: "3 300 мин",
            director: "Джейк Кэздан",
            description: "В 1980-х годах в тихом городке Хоукинс пропадает мальчик. Его друзья, знакомые с научной фантастикой, начинают поиски и сталкиваются с загадочной девочкой-телекинетом, секретной правительственной лабораторией и монстрами из параллельного измерения. Это приключение, полное тайны, ужаса и научной фантастики.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
        {
            id: 81,
            title: "Назад в будущее",
            year:  1985,
            rating: 8.7,
            duration: "3 300 мин",
            director: "Роберт Земекис",
            description: "Подросток Марти Макфлай случайно путешествует во времени на 30 лет назад и должен исправить прошлое, чтобы вернуться в своё настоящее.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Хроники Нарнии: Лев, колдунья и волшебный шкаф",
            year:  2005,
            rating: 7.4,
            duration: "140 мин",
            director: "Эндрю Адамсон",
            description: "Эндрю Адамсон",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Аватар",
            year: 2009,
            rating: 8.0,
            duration: "162 мин",
            director: "Джеймс Кэмерон",
            description: "Солдат в теле инопланетянина переходит на сторону местных жителей, чтобы защитить их планету от землян.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Парк Юрского периода",
            year:  1993,
            rating: 8.2,
            duration: "127 мин",
            director: "Стивен Спилберг",
            description: "Ученые создают парк с динозаврами, но хищники сбегают, и посетители борются за выживание.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Гарри Поттер и Философский камень",
            year:  2001,
            rating: 8.2,
            duration: "152 мин",
            director: "Крис Коламбус",
            description: "Мальчик-сирота узнает, что он волшебник, и в школе магии пытается защитить философский камень от злодея.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Старик Хэ",
            year:  2022,
            rating: 7.6,
            duration: "92 мин",
            director: "Джоэл Кокс",
            description: "	Пожилой рыбак в одиночку борется с гигантской рыбой в открытом море.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Хоббит: Нежданное путешествие",
            year:  2012,
            rating: 7.8,
            duration: "169 мин",
            director: "Питер Джексон",
            description: "Хоббит Бильбо отправляется в поход с гномами, чтобы отобрать у дракона их древнее королевство.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },
         {
            id: 81,
            title: "Стражи Галактики",
            year:2014  ,
            rating: 7.9,
            duration: "121 мин",
            director: "Джеймс Ганн",
            description: "Разношерстная команда космических неудачников объединяется, чтобы спасти галактику от могущественного артефакта.",
            poster: "img/индиана джонс.jfif",
            reviews: [
                { user: "Павел", rating: 5, comment: "Культовое приключение" },
                { user: "Ирина", rating: 5, comment: "Любимый фильм детства" }
            ]
        },

        // ... остальные 10 приключений
    ],

    mystery: [
        {
            id: 91,
            title: "Семь",
            year: 1995,
            rating: 8.6,
            duration: "127 мин",
            director: "Дэвид Финчер",
            description: "Детективный триллер о серии убийств, основанных на семи смертных грехах. Два детектива охотятся на гениального убийцу.",
            poster: "img/семь.jpeg",
            mood: "mystery",
            reviews: [
                { user: "Константин", rating: 5, comment: "Блестящий детектив" },
                { user: "Лариса", rating: 4, comment: "Мрачно и захватывающе" }
            ]
        },
        // ... остальные 10 детективов
    ],

    animation: [
        {
            id: 101,
            title: "Король Лев",
            year: 1994,
            rating: 8.5,
            duration: "88 мин",
            director: "Роджер Аллерс",
            description: "Анимационная классика о приключениях львенка Симбы, который должен занять свое законное место короля.",
            poster: "img/король лев.jfif",
            mood: "animation",
            reviews: [
                { user: "Алиса", rating: 5, comment: "Лучший мультфильм!" },
                { user: "Петр", rating: 5, comment: "Ностальгия по детству" }
            ]
        },
        // ... остальные 10 анимационных фильмов
    ]
};

// Глобальные переменные
let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
let userReviews = JSON.parse(localStorage.getItem('userReviews')) || {};

// Функции
function scrollToSection(sectionId) {
    document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
}

function filterMovies() {
    const moodFilter = document.getElementById('moodFilter').value;
    const timeFilter = document.getElementById('timeFilter').value;
    const ratingFilter = parseFloat(document.getElementById('ratingFilter').value);

    let allMovies = getAllMovies();
    
    const filteredMovies = allMovies.filter(movie => {
        const matchesMood = !moodFilter || movie.mood === moodFilter;
        const matchesRating = movie.rating >= ratingFilter;
        
        let matchesTime = true;
        const duration = parseInt(movie.duration);
        if (timeFilter === 'short') {
            matchesTime = duration < 120;
        } else if (timeFilter === 'medium') {
            matchesTime = duration >= 120 && duration <= 180;
        } else if (timeFilter === 'long') {
            matchesTime = duration > 180;
        }

        return matchesMood && matchesRating && matchesTime;
    });

    displayMovies(filteredMovies.slice(0, 12), 'recommendedMovies');
}

function displayMovies(movies, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';

    if (movies.length === 0) {
        container.innerHTML = '<div class="no-movies">Фильмы не найдены. Попробуйте изменить фильтры.</div>';
        return;
    }

    movies.forEach(movie => {
        const movieCard = document.createElement('div');
        movieCard.className = 'movie-card';
        movieCard.onclick = () => showMovieDetails(movie);
        
        movieCard.innerHTML = `
            <button class="favorite-btn ${favorites.includes(movie.id) ? 'favorited' : ''}" 
                    onclick="event.stopPropagation(); toggleFavorite(${movie.id})">
                ♥
            </button>
            <img src="${movie.poster}" alt="${movie.title}" class="movie-poster" 
                 onerror="this.src='https://via.placeholder.com/300x450/333333/ffffff?text=No+Image'">
            <div class="movie-info">
                <h3 class="movie-title">${movie.title} (${movie.year})</h3>
                <div class="movie-meta">
                    <div>${movie.director}</div>
                    <div>${movie.duration}</div>
                </div>
                <div class="movie-rating">
                    <span class="rating-stars">${getStarRating(movie.rating)}</span>
                    <span class="rating-value">${movie.rating}</span>
                </div>
                <p class="movie-description">${movie.description.substring(0, 100)}...</p>
            </div>
        `;
        
        container.appendChild(movieCard);
    });
}

function getStarRating(rating) {
    const stars = Math.round(rating / 2);
    return '★'.repeat(stars) + '☆'.repeat(5 - stars);
}

function showGenre(genre) {
    const genreMovies = moviesDatabase[genre] || [];
    displayMovies(genreMovies, 'recommendedMovies');
    scrollToSection('recommendations');
}

function showMovieDetails(movie) {
    const modal = document.getElementById('movieModal');
    const modalContent = document.getElementById('modalContent');
    
    // Объединяем оригинальные отзывы и пользовательские
    const allReviews = [...(movie.reviews || [])];
    if (userReviews[movie.id]) {
        allReviews.push(...userReviews[movie.id]);
    }

    modalContent.innerHTML = `
        <div class="movie-detail-modal">
            <div class="movie-header">
                <img src="${movie.poster}" alt="${movie.title}" class="movie-poster-large"
                     onerror="this.src='https://via.placeholder.com/300x450/333333/ffffff?text=No+Image'">
                <div class="movie-info-large">
                    <h1 class="movie-title-large">${movie.title} (${movie.year})</h1>
                    <div class="movie-meta-large">
                        <div><strong>Режиссер:</strong> ${movie.director}</div>
                        <div><strong>Длительность:</strong> ${movie.duration}</div>
                        <div><strong>Жанр:</strong> ${getGenreByMood(movie.mood)}</div>
                    </div>
                    <div class="movie-rating-large">
                        <span class="rating-stars-large">${getStarRating(movie.rating)}</span>
                        <span class="rating-value-large">${movie.rating}/10</span>
                    </div>
                    <button class="favorite-btn ${favorites.includes(movie.id) ? 'favorited' : ''}" 
                            onclick="toggleFavorite(${movie.id}); updateFavoriteButton(${movie.id})">
                        ♥
                    </button>
                    <p class="movie-description-large">${movie.description}</p>
                </div>
            </div>

            <div class="reviews-section">
                <h3>Отзывы зрителей</h3>
                ${allReviews.length > 0 ? 
                    allReviews.map(review => `
                        <div class="review-card">
                            <div class="review-header">
                                <span class="review-user">${review.user}</span>
                                <span class="review-rating">${'★'.repeat(review.rating)}${'☆'.repeat(5-review.rating)}</span>
                            </div>
                            <p>${review.comment}</p>
                        </div>
                    `).join('') 
                    : '<p>Пока нет отзывов. Будьте первым!</p>'
                }

                <div class="add-review-form">
                    <h4>Добавить отзыв</h4>
                    <div class="form-group">
                        <label for="reviewUserName">Ваше имя:</label>
                        <input type="text" id="reviewUserName" placeholder="Введите ваше имя">
                    </div>
                    <div class="form-group">
                        <label for="reviewUserRating">Оценка:</label>
                        <select id="reviewUserRating">
                            <option value="5">5 - Отлично</option>
                            <option value="4">4 - Хорошо</option>
                            <option value="3">3 - Нормально</option>
                            <option value="2">2 - Плохо</option>
                            <option value="1">1 - Ужасно</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reviewUserComment">Ваш отзыв:</label>
                        <textarea id="reviewUserComment" placeholder="Напишите ваш отзыв здесь..."></textarea>
                    </div>
                    <button class="btn-primary" onclick="addUserReview(${movie.id})">Добавить отзыв</button>
                </div>
            </div>
        </div>
    `;
    
    modal.style.display = 'block';
}

function updateFavoriteButton(movieId) {
    const button = document.querySelector('.favorite-btn');
    if (button) {
        button.classList.toggle('favorited', favorites.includes(movieId));
    }
    updateFavoritesCount();
}

function toggleFavorite(movieId) {
    const index = favorites.indexOf(movieId);
    if (index > -1) {
        favorites.splice(index, 1);
    } else {
        favorites.push(movieId);
    }
    
    localStorage.setItem('favorites', JSON.stringify(favorites));
    updateFavoritesCount();
    displayFavorites();
    
    // Обновляем отображение фильмов
    filterMovies();
    displayTopMovies();
}

function updateFavoritesCount() {
    const countElement = document.getElementById('favoritesCount');
    if (countElement) {
        countElement.textContent = favorites.length;
    }
}

function displayFavorites() {
    const favoritesGrid = document.getElementById('favoritesGrid');
    if (favorites.length === 0) {
        favoritesGrid.innerHTML = '<div class="empty-favorites"><p>У вас пока нет избранных фильмов</p></div>';
        return;
    }

    const favoriteMovies = getAllMovies().filter(movie => favorites.includes(movie.id));
    displayMovies(favoriteMovies, 'favoritesGrid');
}

function displayTopMovies() {
    const allMovies = getAllMovies();
    const topMovies = allMovies.sort((a, b) => b.rating - a.rating).slice(0, 10);
    displayMovies(topMovies, 'topMovies');
}

function addUserReview(movieId) {
    const userName = document.getElementById('reviewUserName').value.trim();
    const userRating = parseInt(document.getElementById('reviewUserRating').value);
    const userComment = document.getElementById('reviewUserComment').value.trim();

    if (!userName || !userComment) {
        alert('Пожалуйста, заполните все поля');
        return;
    }

    if (!userReviews[movieId]) {
        userReviews[movieId] = [];
    }

    userReviews[movieId].push({
        user: userName,
        rating: userRating,
        comment: userComment
    });

    localStorage.setItem('userReviews', JSON.stringify(userReviews));
    
    // Обновляем отображение
    const movie = getAllMovies().find(m => m.id === movieId);
    if (movie) {
        showMovieDetails(movie);
    }
    
    alert('Спасибо за ваш отзыв!');
}

function getGenreByMood(mood) {
    const genreMap = {
        comedy: "Комедия",
        drama: "Драма",
        thriller: "Триллер",
        action: "Боевик",
        fantasy: "Фэнтези",
        'sci-fi': "Фантастика",
        romance: "Мелодрама",
        horror: "Ужасы",
        adventure: "Приключения",
        mystery: "Детектив",
        animation: "Анимация"
    };
    return genreMap[mood] || "Неизвестно";
}

function getAllMovies() {
    return Object.values(moviesDatabase).flat();
}

// Инициализация
document.addEventListener('DOMContentLoaded', function() {
    // Инициализация модального окна
    const modal = document.getElementById('movieModal');
    const closeModal = document.querySelector('.close-modal');
    
    closeModal.onclick = function() {
        modal.style.display = 'none';
    }
    
    window.onclick = function(event) {
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    }

    // Показываем случайные фильмы на главной
    let allMovies = getAllMovies();
    const shuffled = allMovies.sort(() => 0.5 - Math.random());
    displayMovies(shuffled.slice(0, 12), 'recommendedMovies');
    
    // Показываем топ фильмы
    displayTopMovies();
    
    // Показываем избранные
    displayFavorites();
    
    // Обновляем счетчик избранного
    updateFavoritesCount();
});
// В функции displayMovies в script.js обновите разметку:
movieCard.innerHTML = `
    <div class="movie-card-header">
        <button class="favorite-btn ${favorites.includes(movie.id) ? 'favorited' : ''}" 
                onclick="event.stopPropagation(); toggleFavorite(${movie.id})">
            ♥
        </button>
        <img src="${movie.poster}" alt="${movie.title}" class="movie-poster" 
             onerror="this.src='https://via.placeholder.com/300x450/333333/ffffff?text=No+Image'">
    </div>
    <div class="movie-info">
        <h3 class="movie-title">${movie.title} (${movie.year})</h3>
        <div class="movie-meta">
            <div>${movie.director}</div>
            <div>${movie.duration}</div>
        </div>
        <div class="movie-rating">
            <span class="rating-stars">${getStarRating(movie.rating)}</span>
            <span class="rating-value">${movie.rating}</span>
        </div>
        <p class="movie-description">${movie.description.substring(0, 100)}...</p>
        
        <!-- Альтернативный вариант кнопки (раскомментировать если нужно) -->
        <!--
        <button class="favorite-btn-alt ${favorites.includes(movie.id) ? 'favorited' : ''}" 
                onclick="event.stopPropagation(); toggleFavorite(${movie.id})">
            <span>♥</span>
            ${favorites.includes(movie.id) ? 'В избранном' : 'В избранное'}
        </button>
        -->
    </div>
`;
function toggleFavorite(movieId) {
    const index = favorites.indexOf(movieId);
    const wasFavorited = index > -1;
    
    if (wasFavorited) {
        favorites.splice(index, 1);
    } else {
        favorites.push(movieId);
    }
    
    localStorage.setItem('favorites', JSON.stringify(favorites));
    updateFavoritesCount();
    displayFavorites();
    
    // Анимация кнопки
    const buttons = document.querySelectorAll(`.favorite-btn`);
    buttons.forEach(btn => {
        if (btn.closest('.movie-card') && !wasFavorited) {
            btn.style.animation = 'favoriteAdd 0.8s ease-in-out';
            setTimeout(() => {
                btn.style.animation = '';
            }, 800);
        }
    });
    
    // Обновляем отображение фильмов
    filterMovies();
    displayTopMovies();
}